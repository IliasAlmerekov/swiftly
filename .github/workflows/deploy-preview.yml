name: Deploy Preview

on:
    pull_request:
        branches: [main]

jobs:
    preview:
        name: Deploy Preview
        runs-on: ubuntu-latest
        permissions:
            pull-requests: write
        steps:
            - uses: actions/checkout@v4

            - name: Setup Node.js
              uses: actions/setup-node@v4
              with:
                  node-version: "20"
                  cache: "npm"

            - name: Install dependencies
              run: npm ci

            - name: Build
              run: npm run build
              env:
                  VITE_API_BASE_URL: ${{ secrets.VITE_API_BASE_URL }}

            # Add your deployment step here (Netlify, Vercel, etc.)
            # Example for Netlify:
            # - name: Deploy to Netlify
            #   uses: nwtgck/actions-netlify@v3
            #   with:
            #     publish-dir: './dist'
            #     production-deploy: false
            #   env:
            #     NETLIFY_AUTH_TOKEN: ${{ secrets.NETLIFY_AUTH_TOKEN }}
            #     NETLIFY_SITE_ID: ${{ secrets.NETLIFY_SITE_ID }}
